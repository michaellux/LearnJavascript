<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title></title>
	<meta charset="utf-8" />
</head>
<body>
    <script>

        var date = new Date();

        function formatDate(date)
        {
            var now = new Date();
            var dif = now - date;
            console.log(dif);

            if(dif < 1000)
            {
                alert("только что");
                return "только что";
            }
            else if (dif < 60000)
            {
                alert((dif / 1000) + " сек. назад");
                return (dif / 1000) + " сек. назад";
            }
            else if (dif < 3600000)
            {
                alert((dif / 60000) + " мин. назад");
                return (dif / 60000) + " мин. назад";
            }
            else
            {
                var dd = date.getDate();
                if (dd < 10) dd = '0' + dd;

                var mm = date.getMonth() + 1;
                if (mm < 10) mm = '0' + mm;

                var yy = date.getFullYear() % 100;
                if (yy < 10) yy = '0' + yy;

                var lastDate =  dd + '.' + mm + '.' + yy;

                var minutes = date.getMinutes();

                if ((date.getMinutes()).toString().length < 2)
                {
                    minutes = "0" + date.getMinutes();
                }


                alert(lastDate+ " " + date.getHours() + ":" + minutes);
                return lastDate+ " " + date.getHours()+  ":" + minutes;
            }
        }
        alert(formatDate(new Date(new Date - 1))); // "только что"

        alert(formatDate(new Date(new Date - 30 * 1000))); // "30 сек. назад"

        alert(formatDate(new Date(new Date - 5 * 60 * 1000))); // "5 мин. назад"

        alert(formatDate(new Date(new Date - 86400 * 1000))); // вчерашняя дата в формате "дд.мм.гг чч:мм"
    
        /*Решение*/

        //function formatDate(date) {
        //    var diff = new Date() - date; // разница в миллисекундах

        //    if (diff < 1000) { // прошло менее 1 секунды
        //        return 'только что';
        //    }

        //    var sec = Math.floor(diff / 1000); // округлить diff до секунд

        //    if (sec < 60) {
        //        return sec + ' сек. назад';
        //    }

        //    var min = Math.floor(diff / 60000); // округлить diff до минут
        //    if (min < 60) {
        //        return min + ' мин. назад';
        //    }

        //    // форматировать дату, с учетом того, что месяцы начинаются с 0
        //    var d = date;
        //    d = [
        //      '0' + d.getDate(),
        //      '0' + (d.getMonth() + 1),
        //      '' + d.getFullYear(),
        //      '0' + d.getHours(),
        //      '0' + d.getMinutes()
        //    ];

        //    for (var i = 0; i < d.length; i++) {
        //        d[i] = d[i].slice(-2);
        //    }

        //    return d.slice(0, 3).join('.') + ' ' + d.slice(3).join(':');
        //}

        //alert(formatDate(new Date(new Date - 1))); // только что

        //alert(formatDate(new Date(new Date - 30 * 1000))); // 30 сек. назад

        //alert(formatDate(new Date(new Date - 5 * 60 * 1000))); // 5 мин. назад

        //alert(formatDate(new Date(new Date - 86400 * 1000))); // вчерашняя дата в формате "дд.мм.гг чч:мм"
    
    
    </script>
</body>
</html>
